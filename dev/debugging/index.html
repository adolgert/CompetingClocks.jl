<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Debugging a Simulation that Uses CompetingClocks · CompetingClocks.jl Documentation</title><meta name="title" content="Debugging a Simulation that Uses CompetingClocks · CompetingClocks.jl Documentation"/><meta property="og:title" content="Debugging a Simulation that Uses CompetingClocks · CompetingClocks.jl Documentation"/><meta property="twitter:title" content="Debugging a Simulation that Uses CompetingClocks · CompetingClocks.jl Documentation"/><meta name="description" content="Documentation for CompetingClocks.jl Documentation."/><meta property="og:description" content="Documentation for CompetingClocks.jl Documentation."/><meta property="twitter:description" content="Documentation for CompetingClocks.jl Documentation."/><meta property="og:url" content="https://adolgert.github.io/CompetingClocks.jl/debugging/"/><meta property="twitter:url" content="https://adolgert.github.io/CompetingClocks.jl/debugging/"/><link rel="canonical" href="https://adolgert.github.io/CompetingClocks.jl/debugging/"/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">CompetingClocks.jl Documentation</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><span class="tocitem">Guide</span><ul><li><a class="tocitem" href="../guide/">Competing Clocks</a></li><li><a class="tocitem" href="../mainloop/">Sample Main Loop</a></li><li><a class="tocitem" href="../distributions/">Non-exponential Simulation</a></li></ul></li><li><span class="tocitem">Manual</span><ul><li><a class="tocitem" href="../distrib/">Notation for Distributions</a></li><li><a class="tocitem" href="../background/">Markov Processes</a></li><li><a class="tocitem" href="../gsmp/">GSMP</a></li><li><a class="tocitem" href="../samplers/">Understanding Samplers</a></li><li><a class="tocitem" href="../hierarchical/">Hierarchical Samplers</a></li><li><a class="tocitem" href="../memory/">Transitions with Memory</a></li><li><a class="tocitem" href="../commonrandom/">Common Random Numbers</a></li><li class="is-active"><a class="tocitem" href>Debugging a Simulation that Uses CompetingClocks</a><ul class="internal"><li><a class="tocitem" href="#Sample-Unlikely-Events-with-the-Petri-Sampler"><span>Sample Unlikely Events with the Petri Sampler</span></a></li><li><a class="tocitem" href="#Keep-History-of-Enabling-and-Disabling"><span>Keep History of Enabling and Disabling</span></a></li></ul></li></ul></li><li><span class="tocitem">Examples</span><ul><li><a class="tocitem" href="../constant_birth/">Birth-death Process</a></li><li><a class="tocitem" href="../sir/">SIR Model</a></li><li><a class="tocitem" href="../reliability/">Reliability</a></li></ul></li><li><span class="tocitem">Reference</span><ul><li><a class="tocitem" href="../interface/">Interface</a></li><li><a class="tocitem" href="../reference/">Samplers</a></li><li><a class="tocitem" href="../algorithms/">Algorithms</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Manual</a></li><li class="is-active"><a href>Debugging a Simulation that Uses CompetingClocks</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Debugging a Simulation that Uses CompetingClocks</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/adolgert/CompetingClocks.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/adolgert/CompetingClocks.jl/blob/main/docs/src/debugging.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Debugging-a-Simulation-that-Uses-CompetingClocks"><a class="docs-heading-anchor" href="#Debugging-a-Simulation-that-Uses-CompetingClocks">Debugging a Simulation that Uses CompetingClocks</a><a id="Debugging-a-Simulation-that-Uses-CompetingClocks-1"></a><a class="docs-heading-anchor-permalink" href="#Debugging-a-Simulation-that-Uses-CompetingClocks" title="Permalink"></a></h1><p>It can be difficult to debug simulations that use time-varying hazards, especially when it&#39;s possible to cancel events and re-enable events with new hazard rates. This library provides a few tools to help.</p><h2 id="Sample-Unlikely-Events-with-the-Petri-Sampler"><a class="docs-heading-anchor" href="#Sample-Unlikely-Events-with-the-Petri-Sampler">Sample Unlikely Events with the Petri Sampler</a><a id="Sample-Unlikely-Events-with-the-Petri-Sampler-1"></a><a class="docs-heading-anchor-permalink" href="#Sample-Unlikely-Events-with-the-Petri-Sampler" title="Permalink"></a></h2><p>If your simulation has rare events, and you want to test code paths for those rare events, one approach is to sample the next clock entirely randomly. The Petri sampler ignores the distribution of times for events and picks the next event evenly among all enabled keys.</p><pre><code class="language-julia hljs">petri_sampler = Petri{K,T}()
enable!(tw, 3, Exponential(100.0), 0.0, 0.0, rng)
when, what = next(petri_sampler, now, rng)
@assert abs(when - now - 1) &lt;= 1e-9</code></pre><p>It also returns a time that is one plus the current time.</p><h2 id="Keep-History-of-Enabling-and-Disabling"><a class="docs-heading-anchor" href="#Keep-History-of-Enabling-and-Disabling">Keep History of Enabling and Disabling</a><a id="Keep-History-of-Enabling-and-Disabling-1"></a><a class="docs-heading-anchor-permalink" href="#Keep-History-of-Enabling-and-Disabling" title="Permalink"></a></h2><p>The <code>DebugWatcher</code> records every time an event is enabled or disabled. You wouldn&#39;t normally want to use all of this time and memory (and memory churn), but it can be helpful to see the trace of all events enabled and disabled, in addition to those that fired.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../commonrandom/">« Common Random Numbers</a><a class="docs-footer-nextpage" href="../constant_birth/">Birth-death Process »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.14.1 on <span class="colophon-date" title="Wednesday 20 August 2025 13:19">Wednesday 20 August 2025</span>. Using Julia version 1.11.6.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
